branches: [main]
plugins:
  - - '@semantic-release/commit-analyzer'
    - preset: conventionalcommits
      presetConfig:
#        types:
#          - {type: patch, section: 'ğŸ”§ Patches', hidden: false}
#          - {type: minor, section: 'ğŸ”– Minor Changes', hidden: false}
#          - {type: major, section: 'ğŸš¨ Major Changes', hidden: false}
#          - {type: feat, section: 'ğŸš€ Features', hidden: false}
#          - {type: fix, section: 'ğŸ› Bug Fixes', hidden: false}
#          - {type: perf, section: 'âš¡ Performance', hidden: false}
#          - {type: refactor, section: 'ğŸšœ Refactor', hidden: false}
#          - {type: docs, section: 'ğŸ“š Documentation', hidden: false}
#          - {type: test, section: 'ğŸ§ª Testing', hidden: false}
#          - {type: style, section: 'ğŸ¨ Styling', hidden: false}
#          - {type: revert, section: 'â—€ï¸ Revert', hidden: false}
#          - {type: build, section: 'ğŸ—ï¸ Build', hidden: false}
#          - {type: ci, section: 'ğŸ”„ CI', hidden: false}
#          - {type: chore, section: 'ğŸ§¹ Chore', hidden: false}
#        bumpStrict: true
      parserOpts: {
#        headerPattern: '/^(\w*)(?:\((.*)\))?!?: (.*)$/',
#        breakingHeaderPattern: '/^(\w*)(?:\((.*)\))?!: (.*)$/',
#        headerCorrespondence: [ "type", "scope", "subject" ],
        noteKeywords: [ "BREAKING CHANGE", "BREAKING CHANGES", "BREAKING-CHANGE", "BREAKING-CHANGES", "BREAKING" ],
#        revertPattern: '/^(?:Revert|revert:)\s"?([\s\S]+?)"?\s*This reverts commit (\w*)\./i',
      }
#      releaseRules:
#        - {type: patch, release: patch}
#        - {type: minor, release: minor}
#        - {type: major, release: major}
#        - {type: perf, release: patch}
#        - {type: refactor, release: patch}
#        - {type: docs, release: false}
#        - {type: test, release: patch}
#        - {type: style, release: patch}
#        - {type: revert, release: patch}
#        - {type: build, release: false}
#        - {type: ci, release: false}
#        - {type: chore, release: patch}

  - - '@semantic-release/release-notes-generator'
    - preset: conventionalcommits
      presetConfig:
        types:
          - { type: patch, section: 'ğŸ”§ Patches', hidden: false }
          - { type: minor, section: 'ğŸ”– Minor Changes', hidden: false }
          - { type: major, section: 'ğŸš¨ Major Changes', hidden: false }
          - {type: feat, section: 'ğŸš€ Features', hidden: false}
          - {type: fix, section: 'ğŸ› Bug Fixes', hidden: false}
          - {type: perf, section: 'âš¡ Performance', hidden: false}
          - {type: refactor, section: 'ğŸšœ Refactor', hidden: false}
          - {type: docs, section: 'ğŸ“š Documentation', hidden: false}
          - {type: test, section: 'ğŸ§ª Testing', hidden: false}
          - {type: style, section: 'ğŸ¨ Styling', hidden: false}
          - {type: revert, section: 'â—€ï¸ Revert', hidden: false}
          - {type: build, section: 'ğŸ—ï¸ Build', hidden: false}
          - {type: ci, section: 'ğŸ”„ CI', hidden: false}
          - {type: chore, section: 'ğŸ§¹ Chore', hidden: false}
        commitGroupsSort: ['feat', 'fix', 'perf', 'refactor', 'docs', 'test', 'style', 'revert', 'build', 'ci', 'chore']

  - - '@semantic-release/changelog'
    - changelogFile: '../docs/CHANGELOG.md'
      changelogTitle: "# Changelog\n\nAll notable changes to this project will be documented in this file."

  - - '@semantic-release/exec'
    - prepareCmd: |
        # The git plugin does not commit the changelog as it is not in a subdirectory of the working directory.
        # So we need to do it manually.
        git config user.name "semantic-release-bot"
        git config user.email "semantic-release-bot@martynus.net"
        git add ../docs/CHANGELOG.md
        git commit -m "chore(release): update changelog for ${nextRelease.version} [skip ci]"
        git push origin main

  - '@semantic-release/github'
